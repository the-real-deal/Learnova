@page "/ProfessorsTimesheet"
@using Learnova.Context
@using Learnova.Entities
@using Microsoft.EntityFrameworkCore

<MudSelect ValueChanged="StateHasChanged" bind-Value="selectedTeacher" T="string" Label="Seleziona professore">
    @foreach (Professori professore in prof)
    {
        <MudSelectItem T="string" Value="professore.Cf">
            @($"{@professore.Nome} {@professore.Cognome} {professore.Cf}")
        </MudSelectItem>
    }
</MudSelect>

<MudTable Items="ore">
    <HeaderContent>
        <MudTh>Ora</MudTh>
        <MudTh>Lunedì</MudTh>
        <MudTh>Martedì</MudTh>
        <MudTh>Mercoldì</MudTh>
        <MudTh>Giovedì</MudTh>
        <MudTh>Venerdì</MudTh>
        <MudTh>Sabato</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Ora">
            @context
        </MudTd>
        @for (int i=0; i<=5; i++)
        {
            <MudTd>
                @if (@lezione.Select(x=>x.CodiceProfessores))
                {
                    // if (@lezione.Where(x => x.CodiceProfessore == "RSSFRC86R50H501M").Contains())
                    // {
                    //
                    // }
                    @* @lezione.First(x => x.Giorno.Equals(i) && x.Ora.Equals(@context)).CodiceClasse *@
                    <MudText>tu mamma</MudText>
                }
            </MudTd>
        }
    </RowTemplate>
</MudTable>

@code
{
    public IQueryable<LezioniProgrammate> lezione { get; set; }
    public string selectedTeacher { get; set; } = null;
    public List<int> ore { get; set; }
    protected override void OnInitialized()
    {
        MyDbContext dbContext = new MyDbContext();

        lezione = dbContext.LezioniProgrammates;

        ore = dbContext.LezioniProgrammates.Select(x => x.Ora).Distinct().ToList();
        ore.Sort();

        selectedTeacher = dbContext.Professoris.First(x => true).Cf;
    }

    public string WeekDay(int s)
    {

        string o = "";
        switch (s)
        {
            case 0:
                o = "Lunedì";
                break;
            case 1:
                o = "Martedì";
                break;
            case 2:
                o = "Mercoledì";
                break;
            case 3:
                o = "Giovedì";
                break;
            case 4:
                o = "Venerdì";
                break;
            case 5:
                o = "Sabato";
                break;
        }

        return o;
    }
}
